name: "csv_regional_usa_output"
category: "tutorial-examples"
description: "CSV output with USA/UK/Asia regional format - comma delimiter with formatted numbers"
tags: ["csv", "json", "regional", "numbers", "usa", "tutorial", "output"]

input:
  format: json
  data: |
    {
      "items": [
        {"product": "Widget A", "quantity": 100, "unitPrice": 1234.56, "total": 123456.00},
        {"product": "Gadget B", "quantity": 50, "unitPrice": 2500.00, "total": 125000.00},
        {"product": "Tool C", "quantity": 25, "unitPrice": 999.99, "total": 24999.75}
      ]
    }

transformation: |
  %utlx 1.0
  input json
  output csv {
    headers: true,
    delimiter: ","
  }
  ---
  $input.items |> map(item => {
    product: item.product,
    quantity: item.quantity,
    unit_price: item.unitPrice,
    total: item.total
  })

expected:
  format: csv
  data: |
    product,quantity,unit_price,total
    Widget A,100,1234.56,123456
    Gadget B,50,2500,125000
    Tool C,25,999.99,24999.75

performance_limits:
  max_duration_ms: 300
  max_memory_mb: 15

metadata:
  author: "UTL-X Tutorial"
  source: "interactive-session-2025-10-28"
  complexity: "intermediate"
  notes:
    - "Demonstrates CSV output with USA/UK/Asia format"
    - "Comma delimiter with period decimal separator"
    - "Numbers output without thousands separators (standard)"
    - "No quoting needed for plain numeric values"
    - "Common format for data exchange in USA, UK, India, Asia"

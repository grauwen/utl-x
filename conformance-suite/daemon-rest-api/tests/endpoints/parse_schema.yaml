name: Parse Schema
description: Test schema parsing via /api/parse-schema endpoint (positive and negative tests)
tags:
  - endpoints
  - parse-schema
  - schema

sequence:
  # Positive Tests - Valid schemas should parse successfully
  - description: "✓ POSITIVE: Parse valid JSON Schema successfully"
    method: POST
    endpoint: /api/parse-schema
    headers:
      Content-Type: application/json
    body:
      schema: "{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"number\"}},\"required\":[\"name\"]}"
      format: "json-schema"
    expect:
      status: 200
      body:
        success: true
        normalized: "{{STRING}}"

  - description: "✓ POSITIVE: Parse valid XSD schema successfully"
    method: POST
    endpoint: /api/parse-schema
    headers:
      Content-Type: application/json
    body:
      schema: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"><xs:element name=\"person\"><xs:complexType><xs:sequence><xs:element name=\"name\" type=\"xs:string\"/><xs:element name=\"age\" type=\"xs:int\"/></xs:sequence></xs:complexType></xs:element></xs:schema>"
      format: "xsd"
    expect:
      status: 200
      body:
        success: true
        normalized: "{{STRING}}"

  # Negative Tests - Invalid schemas should fail gracefully
  - description: "✗ NEGATIVE: Unsupported format should return 400"
    method: POST
    endpoint: /api/parse-schema
    headers:
      Content-Type: application/json
    body:
      schema: "some schema content"
      format: "unsupported-format"
    expect:
      status: 400
      body:
        success: false
        error: "{{STRING}}"

  - description: "✗ NEGATIVE: Invalid JSON should return 500 with error message"
    method: POST
    endpoint: /api/parse-schema
    headers:
      Content-Type: application/json
    body:
      schema: "{invalid json}"
      format: "json-schema"
    expect:
      status: 500
      body:
        success: false
        error: "{{STRING}}"

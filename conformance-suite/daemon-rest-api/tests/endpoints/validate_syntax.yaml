name: Validate Syntax
description: Test syntax validation via /api/validate endpoint
tags:
  - endpoints
  - validate
  - syntax

sequence:
  - description: "Valid script should pass validation"
    method: POST
    endpoint: /api/validate
    headers:
      Content-Type: application/json
    body:
      utlx: "%utlx 1.0\ninput json\noutput json\n---\n$input"
    expect:
      status: 200
      body:
        valid: true
        diagnostics: []

  - description: "Invalid script should fail validation with diagnostics"
    method: POST
    endpoint: /api/validate
    headers:
      Content-Type: application/json
    body:
      utlx: "%utlx 1.0\ninput json\noutput json\n---\n{invalid syntax"
    expect:
      status: 200
      body:
        valid: false
        diagnostics:
          - severity: "error"
            message: "{{STRING}}"
            line: "{{NUMBER}}"
            column: "{{NUMBER}}"
            source: "{{STRING}}"

name: "csv_regional_europe_input"
category: "tutorial-examples"
description: "CSV input with European regional format - semicolon delimiter with comma decimal and period thousands separator"
tags: ["csv", "json", "regional", "numbers", "europe", "tutorial", "delimiter"]

input:
  format: csv
  data: |
    product;quantity;unit_price;total
    Widget A;100;1.234,56;123.456,00
    Gadget B;50;2.500,00;125.000,00
    Tool C;25;999,99;24.999,75

transformation: |
  %utlx 1.0
  input csv {
    headers: true,
    delimiter: ";"
  }
  output json
  ---
  {
    region: "Europe/Latin America",
    format: {
      delimiter: "semicolon",
      decimal: "comma",
      thousands: "period"
    },
    items: $input |> map(row => {
      product: row.product,
      quantity: parseNumber(row.quantity),
      unitPrice: parseEUNumber(row.unit_price),
      total: parseEUNumber(row.total)
    }),
    summary: {
      totalRevenue: sum($input |> map(row => parseEUNumber(row.total)))
    }
  }

expected:
  format: json
  data: |
    {
      "region": "Europe/Latin America",
      "format": {
        "delimiter": "semicolon",
        "decimal": "comma",
        "thousands": "period"
      },
      "items": [
        {
          "product": "Widget A",
          "quantity": 100,
          "unitPrice": 1234.56,
          "total": 123456
        },
        {
          "product": "Gadget B",
          "quantity": 50,
          "unitPrice": 2500,
          "total": 125000
        },
        {
          "product": "Tool C",
          "quantity": 25,
          "unitPrice": 999.99,
          "total": 24999.75
        }
      ],
      "summary": {
        "totalRevenue": 273455.75
      }
    }

performance_limits:
  max_duration_ms: 300
  max_memory_mb: 15

metadata:
  author: "UTL-X Tutorial"
  source: "interactive-session-2025-10-28"
  complexity: "intermediate"
  notes:
    - "Demonstrates European/Latin American regional number format"
    - "Semicolon delimiter avoids conflict with comma decimal separator"
    - "Period used as thousands separator (e.g., 1.234,56)"
    - "Numbers don't need quoting since delimiter is semicolon"
    - "Uses parseEUNumber() for clean conversion of European format numbers"
    - "parseEUNumber() handles: remove periods (thousands), replace comma with period"
    - "Common format in Germany, France, Spain, Italy, Brazil, Argentina"

After a change do:

 1. Rebuild TypeScript:
  cd /Users/magr/data/mapping/github-git/utl-x/theia-extension/utlx-theia-extension
  npx tsc
  (The --listFiles | grep is just for verification, not needed for the build)

  2. Clean webpack cache:
  cd ../browser-app
  rm -rf .theia lib node_modules/.cache

  3. Build the browser app (this already runs webpack internally):
  npx theia build --mode production
  (The --log-level verbose --stats verbose flags may not both work, and you don't need them)

  4. Rebuild webpack - SKIP THIS STEP

  5. Kill processes on port 4000:
  lsof -ti:4000 | xargs kill -9 2>/dev/null
  sleep 2

  6. Restart server:
  npx theia start --hostname=0.0.0.0 --port=4000 ~/data/utlx-workspace

-----------

  1. Rebuild TypeScript: 
cd /utl-x/theia-extension/utlx-theia-extension
npx tsc --listFiles | grep -E "(output-panel|editor)"

  2. clean webpack cache
cd /utl-x/theia-extension/browser-app (../browser-app from previous)
rm -rf .theia lib node_modules/.cache

  3. Build the browser app (this bundles everything): 
cd /utl-x/theia-extension/browser-app (../browser-app from previous)
npx theia build --mode production --log-level verbose --stats verbose
  
  4. Rebuild webpack: 
cd /utl-x/theia-extension/browser-app (same dire as previous) 
npx webpack --config webpack.config.js --mode production --stats detailed

  5. kill all rpocesses still running on port 4000; 
lsof -ti:4000 | xargs kill -9 2>/dev/null; 

  6. Restart server:  
cd /utl-x/theia-extension/browser-app (same dire as previous) 
npx theia start --hostname=0.0.0.0 --port=4000 ~/data/utlx-workspace

-----
 But more importantly, let's verify your changes were actually compiled. Check if your changes are in the compiled JavaScript:

  cd /Users/magr/data/mapping/github-git/utl-x/theia-extension/utlx-theia-extension

  # Check if the output panel has the format dropdown
  grep -n "XSD %USDL 1.0" lib/browser/output-panel/output-panel-widget.js

  # Check if the editor has the read-only decorations
  grep -n "utlx-readonly-line" lib/browser/editor/utlx-editor-widget.js

  # Check if parseHeaderEndLine exists
  grep -n "parseHeaderEndLine" lib/browser/editor/utlx-editor-widget.js



yarn start => yarn start has an issue!

----
 The CSS file you need to modify is:

utl-x/theia-extension/utlx-theia-extension/src/browser/style/index.css

 The CSS is aware of dark and light OS mode! Theia uses CSS variables that automatically change based on the theme. Here's what you need to know:

  Current Vertical Tab Styling (around line 627-643):

  .utlx-vertical-tab {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 8px 0px;
      background: var(--theia-button-background);
      border: 1px solid var(--theia-button-border);
      border-radius: 3px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 12px;
      color: var(--theia-foreground);  /* <-- This is the text color */
      min-height: 80px;
      width: 100%;
  }

  The Problem:

  The color: var(--theia-foreground) uses Theia's main foreground color, which in light mode is probably black or very dark. This works fine for most UI
  elements but may not have enough contrast on your button background.

  Solutions:

  You have several options:

  1. Use a specific foreground color for buttons:
  color: var(--theia-button-foreground);
  2. Use the editor foreground (usually has better contrast):
  color: var(--theia-editor-foreground);
  3. Use a semi-transparent color that works in both modes:
  color: rgba(255, 255, 255, 0.8);  /* Light text, works better in dark mode */
  4. Use different colors for light and dark mode:
  /* For dark mode (default) */
  color: var(--theia-foreground);

  /* For light mode - you can use media query or Theia's theme variables */
  [data-theme='light'] & {
      color: rgba(0, 0, 0, 0.7);
  }

  My Recommendation:

  Try changing line ~639 from:
  color: var(--theia-foreground);

  to:
  color: var(--theia-button-foreground);

  This should automatically adapt to both light and dark modes correctly, as Theia's button foreground color is designed to contrast with the button
  background.

-----

Header of UTLX transform is for this version  of IDE fixed 
%UTLX 1.0
inputs; [linked to the type selected in the input pane format][for each vertical TAB an input definition]
output  [Linked to the type selected in the output pane format] 
——————————————
Runtime MODE (one tab- instance)

INPUT Pane (left Pane)

Instance: Format  (dropdown) -> linked to the Header of UTLX Input  (minimal 1)
- csv
- Json
- xml
- yaml
- xsd  
- jsch 
- avro 
- proto 

[ could be repeated for each additional input in vertical TAB -> linked to the Header of UTLX Input2…InputN ]

Vertical there should be a +  so an input can be addd. Each input has one horizontal tab (trivial)  in design mode

he vertical tabs should be on the left side of the content area, and the horizontal Instance/Schema tabs 
  should remain fixed at the top. The vertical tabs select which input to display, and the Instance/Schema tabs stay in place showing the selected input's
  data.


Each input  should allow a field to change the input name which is also the name used in the UTLX definition

When there are multiple vertical tabs, a cross in front shpould allow to delete an vertical tab, when cross is punched a popup should ask " Are you sure to delete input <name of input>

OUTPUT  Pane (right  Pane)

Instance  Format  (dropdown) -> linked to the output in the header of UTLX 
- csv
- Json
- xml
- yaml
- xsd %USDL 1.0
- jsch %USDL 1.0
- avro %USDL 1.0
- proto %USDL 1.0
——————————————

Design Tome MODE (two tab instance)

INPUT Pane (left Pane)

There should be a Field where NAME is shown and name could be changed. Default is "input" for the first input, which is reflected in UTLX as: input

TAB Instance:; Format   |     ->  == linked  between tabs formats)  TAB Schema Format: (these are linked)                   | UTLX (open in Monaco editor) Chenge to:
------------------------------------------------------------------------------------------------------------------------------------------------------
- json      selected    |     -> set to jsch                                                                                | input json OR WHEN MUTIPLE inputs: name json
- xml       selected    |     -> set to xsd                                                                                 | input xml
- yaml      selected    |     -> set to jsch                                                                                | input yaml
- csv                   |     -> Schema [should be made BLUR)  => put that text within schema as //tsch not implemented yet | input csv
- xsd                   |      -> Schema [should be made BLUR)                                                              | input xsd
- jsch                  |      -> Schema [should be made BLUR)                                                              | input jsch
- avro                  |      -> Schema [should be made BLUR)                                                              | input avro
- proto                 |      -> Schema [should be made BLUR)                                                              | input proto


reversed (when user explicetly sets the Format of the Schema)
TAB Instance:; Format   ( <- == linked  between tabs formats)  TAB Schema Format: (these are linked)
- set to json                  <- jsch selected
- set to xml                   <- xsd selected


Vertical TAB for INPUT Pane there should be a +  so an input can be addd. Each input has two horizontal tabs in design mode. 

Why having tier2 (xsd,jsch,avro,proto) still as possible input? Because the output could have an instance document with an schema attached, or it is one of the multiple inputs (there might be reasons why)

The above Instance and Schema should be linked. If the instance is changing the schema  format should change

-----



{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/iot-telemetry.schema.json",
  "title": "IoT Device Telemetry",
  "description": "IoT device telemetry data schema for industrial sensors and smart devices",
  "type": "object",
  "required": ["deviceId", "timestamp", "measurements"],
  "properties": {
    "deviceId": {
      "type": "string",
      "pattern": "^[A-Z0-9-]{8,50}$"
    },
    "deviceType": {
      "type": "string",
      "enum": ["temperature-sensor", "humidity-sensor", "pressure-sensor", "vibration-sensor", "flow-meter", "level-sensor", "motion-detector", "smart-meter"]
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "location": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "altitude": {
          "type": "number"
        },
        "facility": {
          "type": "string"
        },
        "zone": {
          "type": "string"
        }
      }
    },
    "measurements": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["metric", "value", "unit"],
        "properties": {
          "metric": {
            "type": "string",
            "minLength": 1
          },
          "value": {
            "type": "number"
          },
          "unit": {
            "type": "string",
            "minLength": 1
          },
          "quality": {
            "type": "string",
            "enum": ["good", "uncertain", "bad"],
            "default": "good"
          },
          "min": {
            "type": "number",
            "description": "Minimum acceptable value"
          },
          "max": {
            "type": "number",
            "description": "Maximum acceptable value"
          }
        }
      }
    },
    "deviceStatus": {
      "type": "object",
      "properties": {
        "batteryLevel": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Battery percentage"
        },
        "signalStrength": {
          "type": "integer",
          "minimum": -120,
          "maximum": 0,
          "description": "Signal strength in dBm"
        },
        "health": {
          "type": "string",
          "enum": ["healthy", "warning", "critical", "offline"]
        },
        "lastMaintenance": {
          "type": "string",
          "format": "date-time"
        },
        "firmwareVersion": {
          "type": "string"
        }
      }
    },
    "alerts": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["severity", "code", "message"],
        "properties": {
          "severity": {
            "type": "string",
            "enum": ["info", "warning", "error", "critical"]
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "threshold": {
            "type": "number"
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "manufacturer": {
          "type": "string"
        },
        "model": {
          "type": "string"
        },
        "serialNumber": {
          "type": "string"
        },
        "installationDate": {
          "type": "string",
          "format": "date"
        }
      }
    }
  }
}

# Elasticsearch Index Mapping - E-commerce Product Catalog
settings:
  number_of_shards: 5
  number_of_replicas: 2
  refresh_interval: "30s"
  max_result_window: 10000
  analysis:
    analyzer:
      product_name_analyzer:
        type: custom
        tokenizer: standard
        filter:
          - lowercase
          - asciifolding
          - product_synonym
          - snowball
      autocomplete:
        type: custom
        tokenizer: edge_ngram_tokenizer
        filter: [lowercase]
    tokenizer:
      edge_ngram_tokenizer:
        type: edge_ngram
        min_gram: 2
        max_gram: 10
        token_chars: [letter, digit]
    filter:
      product_synonym:
        type: synonym
        synonyms:
          - "laptop, notebook, computer"
          - "mobile, phone, smartphone"

mappings:
  properties:
    product_id:
      type: keyword
    name:
      type: text
      analyzer: product_name_analyzer
      fields:
        keyword:
          type: keyword
        autocomplete:
          type: text
          analyzer: autocomplete
    description:
      type: text
      analyzer: standard
    price:
      type: scaled_float
      scaling_factor: 100
    currency:
      type: keyword
    category:
      type: keyword
    tags:
      type: keyword
    created_at:
      type: date
      format: strict_date_optional_time||epoch_millis
    ratings:
      type: nested
      properties:
        user_id:
          type: keyword
        score:
          type: byte
        review:
          type: text
        timestamp:
          type: date
